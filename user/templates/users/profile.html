<!-- users/profile.html -->
{% extends "base.html" %}

{% block content %}
<div class="profile">
  <h2>{{ user.username|title }}'s Profile</h2>
  <img src="{{ user.profile.image.url }}" alt="{{ user.username }}'s Profile Picture">
  <p><strong>Bio:</strong> {{ user.profile.bio }}</p>
  <p><strong>Email:</strong> {{ user.email }}</p>
  
  <!-- Add user activity section -->
  <a href="{% url 'update_profile' %}">
    <button>Update Profile</button>
  </a>

  <h3>Your Questions:</h3>
  {% if questions %}
    <ul>
      {% for question in questions %}
        <li>
          <!-- Link to the detailed view of each question -->
          <a href="{% url 'base:question_detail' question.id %}">{{ question.title }}</a>
          <p>{{ question.content|truncatewords:20 }}</p>
          <small>Posted on: {{ question.date_created }}</small>
          {% if question.user == user %}
            <a href="{% url 'base:question_update' question.id %}">
              <button>Update Your Question</button>
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>You haven't posted any questions yet.</p>
  {% endif %}
  
  <h3>Your Replied Questions:</h3>
  {% if replied_questions %}
    <ul>
      {% for question in replied_questions %}
        <li>
          <!-- Link to the detailed view of the replied question -->
          <a href="{% url 'base:question_detail' question.id %}">{{ question.title }}</a>
          <p>{{ question.content|truncatewords:20 }}</p>
          <small>Replied on: {{ question.date_created }}</small>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>You haven't replied to any questions yet.</p>
  {% endif %}
</div>
{% endblock %}
